<%- include('header', { title: 'My Books' }) %>

<div class="container">
    <h1>My Published Books</h1>
    <p>Total Books: <%= totalBooks %></p>

    <% if (message) { %>
        <div class="message"><%= message %></div>
    <% } %>

    <section class="books-grid">
        <% if (books && books.length > 0) { %>
            <% books.forEach(book => { %>
                <div class="book-card">
                    <img 
                        src="<%= book.coverImage %>" 
                        alt="<%= book.title %>" 
                        class="book-cover"
                        onerror="this.src='/default-cover.jpg'">
                    <h3><%= book.title %></h3>
                    <p><strong>Author:</strong> <%= book.author %></p>
                    <p><%= book.description %></p>
                    
                    <% if (book.pdfLink) { %>
                        <a href="<%= book.pdfLink %>" target="_blank" class="view-pdf-btn">
                            View PDF
                        </a>
                    <% } %>
                    
                    <form action="/storebook/remove" method="POST">
                        <input type="hidden" name="title" value="<%= book.title %>">
                        <button type="submit" class="remove-btn">Remove</button>
                    </form>
                </div>
            <% }) %>
        <% } else { %>
            <p>No books published yet. <a href="/publish">Publish your first book!</a></p>
        <% } %>
    </section>
</div>

<%- include('footer') %>